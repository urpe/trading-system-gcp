{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h1>游늵 Dashboard de Trading</h1>
    
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card bg-primary text-white">
                <div class="card-body">
                    <h5>Activos Monitoreados</h5>
                    <h2>{{ summary.total_assets }}</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card {% if summary.avg_change > 0 %}bg-success{% elif summary.avg_change < 0 %}bg-danger{% else %}bg-secondary{% endif %} text-white">
                <div class="card-body">
                    <h5>Cambio Promedio 24h</h5>
                    <h2>{{ summary.avg_change }}%</h2>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-info text-white">
                <div class="card-body">
                    <h5>Estado del Mercado</h5>
                    <h2>{{ summary.market_status }}</h2>
                </div>
            </div>
        </div>
    </div>
    
    <div class="card mb-4">
        <div class="card-header">
            <h4>游눯 Precios en Tiempo Real</h4>
        </div>
        <div class="card-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Activo</th>
                        <th>Precio (USD)</th>
                        <th>Cambio 24h</th>
                        <th>Volumen</th>
                        <th>Acci칩n</th>
                    </tr>
                </thead>
                <tbody>
                    {% for asset in assets %}
                    <tr>
                        <td><strong>{{ asset }}</strong></td>
                        <td>${{ "%.2f"|format(data[asset].price|default(0)) }}</td>
                        <td class="{% if data[asset].change|default(0) > 0 %}text-success{% else %}text-danger{% endif %}">
                            {{ "%.2f"|format(data[asset].change|default(0)) }}%
                        </td>
                        <td>{{ "%.0f"|format(data[asset].volume|default(0)) }}</td>
                        <td><a href="/asset/{{ asset }}" class="btn btn-sm btn-outline-primary">Ver</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h4>游뚽 칔ltimas Se침ales</h4>
        </div>
        <div class="card-body">
            {% if signals %}
            <table class="table">
                <thead>
                    <tr><th>Activo</th><th>Se침al</th><th>Precio</th><th>Raz칩n</th></tr>
                </thead>
                <tbody>
                    {% for signal in signals %}
                    <tr>
                        <td>{{ signal.symbol }}</td>
                        <td><span class="badge {% if signal.signal == 'BUY' %}bg-success{% elif signal.signal == 'SELL' %}bg-danger{% else %}bg-secondary{% endif %}">{{ signal.signal }}</span></td>
                        <td>${{ "%.2f"|format(signal.price|default(0)) }}</td>
                        <td>{{ signal.reason }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <p class="text-muted">No hay se침ales recientes.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
